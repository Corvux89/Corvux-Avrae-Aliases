{{i,G="&1&".lower(),load_json(get_gvar("6506e1cc-a2aa-4c42-aca1-177af767a49b"))}}{{loader=[set("G",G+load_json(get_gvar(x))) for x in load_json(get('extraRaceSpells','[]'))]}}{{R=([x for x in G[1:] if all([y in x.name for y in get("race",character().race).lower().replace("(","").replace(")","").split()])]+[G[0]])[0]}}{{di=int(argparse("&*&").last('di') or 0)}}{{F="prerequisite" in R and R.prerequisite in get("feats","")}}{{S=R.get('atWill',[])+R.get('limitedUse',[])+R.get('rituals',[])+(R.get('plimitedUse',[])+R.get('patWill',[])+R.get('prituals',[]) if F else [])}}{{s=([x for x in S if i in x.lower()]+[''])[0]}}{{RS,AW=s and s in R.get('rituals',[])+R.get('prituals',[]),s and s in R.get('atWill',[])+R.get('patWill',[])}}{{v,n=s and character().cc_exists(s) and character().get_cc(s) and not (RS or AW),"no" in R}}{{f,fd=R.pfeature if F else R.feature,R.pfeatureDesc if F else R.featureDesc}}{{(character().mod_cc(s,-1) if v else '') or f'''cast "{s}" -i{" -l 2"*("2nd" in fd and not (RS or AW) and R.limitedUse.index(s)==0)} {([f'-with {x}' for x in ["con","int","wis","cha"] if x.title() in fd]+[""])[0]} {'' if AW or RS else f'-f "{s}|{character().cc_str(s)}"'} -phrase "{'as a ritual ' if RS else 'at will ' if AW else ''}using their {f} feature!" '''+"""&*&"""[len(i)+2*(" " in i):] if s and (v or RS or AW) else f'''embed -title "{name} needs help with {('' if n else 'their ')+(f) } feature!" -desc "{fd}\n{'Spells marked with a † are not in the SRD and require you to create a tome containing them in orer to use them with this alias.' if '†' in fd else ''}" -color {color} -thumb {image} '''+' '.join([f'''-f "{x}|{character().cc_str(x)}"''' for x in R.get('limitedUse',[])+(R.get('plimitedUse',[]) if F else []) if character().cc_exists(x)])}}{{mod_hp(di,0) or f' -f "Adjusted HP|{character().hp_str()}"' if s=="Shield" and v and di else ''}} {{'noconc' if 'conc' in R.featureDesc else ''}}